<ion-header >
  <ion-navbar >
    <button ion-button menuToggle class="logoFix">
      <img src="assets/images/menu.svg" >
    </button>    
    <ion-buttons left>
      <img style="width: 75px;margin-top:-5px;"  src="assets/images/for_eva_logo_white.svg">
    </ion-buttons>
    <ion-buttons left>
      <sup *ngIf="end_url == 'https://n0xc2jthna.execute-api.us-east-1.amazonaws.com/dev'" class="super"><img src="assets/images/Beta.png"></sup>    
    </ion-buttons>      
    <ion-buttons end>
      <button ion-button (click)="searchItems()" style="padding:0 8px;width: 39px;">
          <img src="assets/images/search.svg" style="width: 18px;">
      </button>
      <button ion-button (click)="notifications(notification_count)" style="padding:0 8px;width: 39px;">
        <img src="assets/images/notifications.png" style="height: 18px;width:15px;margin-right:6px;">        
      </button>
      <ion-badge *ngIf="notification_count > 0" class="card-badge1" style="width: 30px;height: 18px;border-radius: 20px;padding: 4px 2px 0px 2px;font-size: 1.0rem;font-weight: bold;">
        <span *ngIf="notification_count < 100" style="font-weight:bold;">{{notification_count}}</span>
        <span *ngIf="notification_count > 99" style="font-weight:bold;">99</span>
        <span *ngIf="notification_count > 99" style="font-weight:bold;">+</span>
      </ion-badge>      
      <button ion-button (click)="chatList()" style="padding:0 8px;width: 39px;">
          <img src="assets/images/question_answer.svg">
      </button>
      <button ion-button (click)="addMember()" style="padding:0 8px;width: 39px;">
          <img src="assets/images/ic_person_add.png">
      </button>
    </ion-buttons>
  </ion-navbar>
</ion-header>

<ion-content (ionScroll)="onScroll($event)">  
  <ion-refresher *ngIf="!isCreationMode && !showSimilar && !filterbyHash && this.sg['filterBy'] != 'NOTIFICATION ALERT' && this.sg['filterBy'] != 'Collections'" (ionRefresh)="doRefresh($event)">
    <ion-refresher-content>pull to refresh</ion-refresher-content>
  </ion-refresher>

  <!-- Carousel Cards 
  <ion-card class="carousel_1">
    <img style="border-radius: 0;" src="assets/images/bitmap.png">
    <p class="carousel_text1">Spread the love, help us grow.</p>
    <p class="carousel_text2">More women in forEva, more value for everyone.</p>
    <div style="text-align: center;">
      <img class="envelop_img" src="assets/images/envelope.png">
      <button (click)="invite()" class="inviteBtn" ion-button>INVITE YOUR CIRCLES</button>
    </div>
    <p class="carousel_text3">Earn 10 karma points for every invitee</p>
  </ion-card> -->

  <!-- filter card -->  
  <ion-card [hidden]="filterCard" style="background-color: #d8d8d8;padding:4px 0 15px 6px;border-radius: 4px;margin-top:10px;" >
    <ion-row style="height:0;">
      <ion-col col-10></ion-col>
      <ion-col col-2 style="cursor: pointer;" (click)="closeFilterCard()">
        <img style="width:22px; margin-left:20px;opacity:0.7;margin-top: -4px;" src="assets/images/close1.svg">
      </ion-col>
    </ion-row>
    <p style="color:#404040;font-size: 1rem;text-align: left;margin:2px 0px 10px 6px;font-weight:400;text-transform:uppercase">FILTERING YOUR FEED BY</p>
    <!-- <p style="color:#656565;font-size: 1.5rem;text-align: left;margin:4px 0px 1px 6px;font-weight: normal;text-transform:uppercase">{{filterValue}}</p> -->
    <p *ngIf="this.sg['filterBy']" style="color:#656565;font-size: 1.5rem;text-align: left;margin:4px 0px 1px 6px;font-weight: normal;display:inline-block;text-transform: capitalize;">#{{this.sg['filterBy']}}</p>
    <button *ngIf="!myHashtagStatus && !(this.sg['filterBy'] == 'NOTIFICATION ALERT' || this.sg['filterBy'] == 'Collections')" ion-button class="hashTagBtnFilter" style="box-shadow: none;height:1.8rem;padding-top:3px;text-transform: capitalize" (click)="followHashtag(this.sg['filterBy'], 'follow')">
      + ADD INTEREST
    </button>
    <button *ngIf="myHashtagStatus" ion-button class="hashTagBtnFilter" style="box-shadow: none;height:1.8rem;padding-top:3px;text-transform: capitalize" (click)="followHashtag(this.sg['filterBy'], 'unfollow')">
      - REMOVE INTEREST
    </button>
  </ion-card>

  <p *ngIf="hashtagStories && hashtagStories.length == 0" style="margin:10px;color:#444;text-align: center;">
    Sorry, no cards currently
  </p>
  <p *ngIf="errMsg" style="margin:10px;color:#444;text-align: center;">
    {{errMsg}}
  </p>

  <!-- wishing card -->
  <ion-card [hidden]="bdayWishes" *ngIf="registration == true" class="animated animatedCount" [ngClass]="{ ' fadeInRight' :  (fadeInRight == true), 'fadeInLeft' :  (fadeInRight == false)}" style="background-color: #FEF5E9;padding-bottom:0px;margin-bottom: 18px;margin-top:10px;border-radius:4px;">
    <ion-row style="height:0;position: relative;z-index: 999999;">
      <ion-col col-10></ion-col>
      <ion-col col-2 (click)="closingCard('bdayWishes')" style="cursor: pointer;">
        <img style="width:22px; margin-left:20px;opacity:0.7" src="assets/images/close1.svg">
      </ion-col>
    </ion-row>
    <div style="position: relative;">
      <img style="border-radius: 0;" src="assets/images/card_bg.png">
      <p *ngIf="name" [ngClass]="{ 'smallFont' :  (name.length > 7), 'hugeFont' :  (name.length < 8)}" style="color:#444; position: absolute; top: 56%;right: 7%;font-weight: 600;opacity:0.9;text-transform: capitalize;">{{name}}!</p>
    </div>  
    <p style="font-size:1.8rem;color:#010101;margin: 15px 40px;">Have a nice day </p>
  </ion-card>

  <!-- card creation starts -->  
  <ion-card class="card_1" class="animated animatedCount" style="box-shadow: none;" *ngIf="bdayWishes == true && systemCard == false" [ngClass]="{ ' fadeInRight' :  (fadeInRight == true), 'fadeInLeft' :  (fadeInRight == false)}">
    <ion-item *ngIf="!selectedChoice && filterCard" style="padding-bottom:22px;" class="pollQue">
      <ion-avatar item-start style="margin: 0px 0px 8px 0;" (click)="myProfilePage()">
        <img class="cssthumb profileImg" *ngIf="!this.sg['myProfileData']" src="assets/images/placeholder_user1.png">       
        <div *ngIf="this.sg['myProfileData']">
          <img  class="cssthumb profileImg" *ngIf="((!this.sg['myProfileData'].profile_image || !this.sg['myProfileData'].profile_image.url) && !this.sg['myProfileData'].avatar_toggle) || ((!this.sg['myProfileData'].avatar_image || !this.sg['myProfileData'].avatar_image.url) && this.sg['myProfileData'].avatar_toggle)" src="assets/images/placeholder_user1.png">
          <img  class="cssthumb profileImg" *ngIf="this.sg['myProfileData'].avatar_toggle && this.sg['myProfileData'].avatar_image && this.sg['myProfileData'].avatar_image.url"  [src]="this.sg['myProfileData'].avatar_image.url" onError ="this.src='assets/images/placeholder_user1.png'">
          <img  class="cssthumb profileImg" *ngIf="!this.sg['myProfileData'].avatar_toggle && this.sg['myProfileData'].profile_image && this.sg['myProfileData'].profile_image.url" [src]="this.sg['myProfileData'].profile_image.url" onError ="this.src='assets/images/placeholder_user1.png'">
        </div>
      </ion-avatar>
      <ion-label item-right *ngIf="this.sg['myProfileData']" style="padding: 5px 0px 0px 5px;margin-top: 0px;margin-bottom: 0px;margin-left:12%;max-width:100%;min-width:88%;width:100%;">
        <!-- <ion-row>
        <ion-col col-12 style="padding:5px 0px 0px 5px;"> -->
        <p  item-right style="margin-left:8px;font-weight:500;text-transform: capitalize;" *ngIf="cardStatus_1" (click)="switchAvatar(name, this.sg['myProfileData'].avatar_toggle)" class="nameCss">Hello {{name}}</p>
        <!-- <div  item-right *ngIf="!cardStatus_1"> -->
        <p *ngIf = "selectedDiscuss && !cardStatus_1" class="nameCss1">Discuss</p>
        <p *ngIf = "selectedReview  && !cardStatus_1" class="nameCss1">Rate</p>
        <p *ngIf = "selectedPoll  && !cardStatus_1" class="nameCss1">Poll</p>
        <p  *ngIf = "selectedRecommend  && !cardStatus_1" class="nameCss1">Ask</p>
        <p style="font-size:1.7rem;padding-top: 4px;" *ngIf="addhashtag" text-wrap class="line-clamp nameCss">{{post_question}}</p>
        <!-- </div>   -->
        <ion-item *ngIf="cardStatus_1 || cardStatus_2" class="pollQue" style="background-color: #E5E5E5;border-radius: 4px;min-height: 35px;">        
          <ion-textarea  class="textareaCss" style="margin:1px 0;padding:8px 7px 10px 10px;min-height:40px;min-width:100%;max-width:100%;width:100%;" (ionFocus)="keyboardOpens('cardtitle')" rows="1" (input)="changeInput()" id="messageInput"    
          [(ngModel)]="post_que" maxlength="200" (ionChange)="myTitle(post_que)" (keyup)="count(post_que, 'post')" placeholder=" {{discplaceholders[my_index]}}"
          autocomplete="on" autocorrect="on" type="text">              
          </ion-textarea>
          <p  *ngIf="cardStatus_2 || cardStatus_3" style.color="{{postCharacterleft > 4 ? '#4a4a4a' : 'red'}}" style="position:absolute;font-size: 1.0rem;color: #4a4a4a;right:4%;bottom:0;margin-bottom: 3px;"> <i>{{postCharacterleft}}</i> </p>          
        </ion-item>            
        <img  *ngIf = "selectedDiscuss && cardStatus_1" item-left style="width: 30px;margin: -3px 0px 0px 10%;" src= "assets/images/path_left.svg"/> 
        <img  *ngIf = "selectedReview  && cardStatus_1" item-left style="width: 30px;margin: -3px 0px 0px 35%;" src= "assets/images/path_left.svg"/> 
        <img  *ngIf = "selectedPoll  && cardStatus_1" item-left style="width: 30px;margin: -3px 0px 0px 45%;" src= "assets/images/path_right.svg"/> 
        <img  *ngIf = "selectedRecommend  && cardStatus_1" item-left style="width: 30px;margin: -3px 0px 0px 71%;" src= "assets/images/path_right.svg"/>       
        <!-- </ion-col>
        </ion-row> -->
      </ion-label>
    </ion-item>    
    <ion-row style="margin:-24px 0px 0px 0px;" *ngIf="cardStatus_1 && filterCard">
      <ion-col col-2></ion-col>
      <ion-col (click)="changeCardType('discussion')">
        <img *ngIf = "selectedDiscuss" class="icons" src="assets/images/discuss_copy.svg">
        <img *ngIf = "!selectedDiscuss" class="icons" src="assets/images/discuss.svg">
        <p class="iconName">DISCUSS</p>         
      </ion-col>  
      <ion-col (click)="changeCardType('review')">
        <img *ngIf = "selectedReview" class="icons" src="assets/images/review_copy.svg">
        <img *ngIf = "!selectedReview" class="icons" src="assets/images/review.svg">
        <p class="iconName">RATE</p>           
      </ion-col>             
      <ion-col (click)="changeCardType('poll')">
        <img *ngIf = "selectedPoll" class="icons" src="assets/images/poll_copy.svg">
        <img *ngIf = "!selectedPoll" class="icons" src="assets/images/poll.svg">
        <p class="iconName">POLL</p>          
      </ion-col> 
      <ion-col (click)="changeCardType('recommend')">
        <img *ngIf = "selectedRecommend"  style="width:22px;height:23.09px;margin-top:2px;" class="icons" src="assets/images/recommend_copy.svg">
        <img *ngIf = "!selectedRecommend" style="width:22px;height:23.09px;margin-top:2px;" class="icons" src="assets/images/recommend.svg">
        <p style="margin-top: -1px;" class="iconName">ASK</p>           
      </ion-col>
    </ion-row>
    <div *ngIf="selectedReview && cardStatus_2" style="width:90%;margin:-3% 5% 0px 5%;">
      <ion-item no-lines style="margin:0px 0 16px 0;padding-left:0px;height:30px;min-height:30px;background-color: transparent;">
        <ion-radio style="margin: 18px 6px 10px 4px;" (ionSelect)="reviewTypeSelect()" [checked]="feedbackStatus" item-left></ion-radio>
        <ion-label [style.color]="myColor" item-right style="font-size:1.2rem; margin-top: 18px;font-weight: 500;color:#4a4a4a;">SHARE YOUR OWN RATING
        </ion-label>
      </ion-item>
      <div class="sldr" *ngIf="reviewType == 'give_feedback'">
        <ion-range readonly [(ngModel)]="rangeValue" color="danger" min="0" max="10" style="padding:5px 0px 5px 10px;" (ionChange)="slidingMethod(rangeValue, story[0].feed.id)" [color]="color">
          <ion-label range-right style="color:#444444;font-size:1.5rem">{{rangeValue}}/10</ion-label>
        </ion-range>
      </div>
    </div>
    <ion-card *ngIf="cardStatus_2" style="box-shadow: none;border-radius: 4px;background: #e5e5e5;padding: 3px 8px;margin: -4px 0 5px 0;width: 100%;">
      <ion-item *ngIf="preview && postCardDescription.length > 0 && isValid"  (click)="goToUrlPreview(postCardDescription)"   no-lines style="background-color:#FAEBC5;border-radius: 4px;width:100%;padding: 0;">
        <ion-thumbnail *ngIf="preview" item-left style="margin: 2px 2px 2px 5px;" >
          <img *ngIf="preview.image" [src]="preview.image" style="border-radius:4px" onError ="this.src='assets/images/review.jpg'">         
        </ion-thumbnail>            
        <ion-label *ngIf="preview" style="white-space:normal;padding: 0px;">
          <p class="line-clamp3" item-right style="font-size: 1.4rem;font-weight: 500;color: #444444;text-align: left; ">{{preview.title}}</p>
          <p item-right style="font-size:1.1rem;font-weight:normal;color:#444444;text-align: left;">{{preview.domain}}</p>
        </ion-label>
      </ion-item>
      <ion-item  style="border-radius:4px;padding: 0;"> 
        <button ion-button item-right style="background-color:transparent;box-shadow: none;position: absolute;right: 0;top:0;margin-top:0px;">            
          <img (click)="multipleImageAttachment()" style="width: 20px;" src ="assets/images/attachment.png">          
        </button>
        <ion-textarea style="min-height:60px;" id="descriptionInput"  (input)="changeDescription()" class="textareaCss textareaCss1" rows="6"
         (ionFocus)="keyboardOpens('cardtitle')" placeholder="Got more to share" autocomplete="on" autocorrect="on" type="text" maxlength="3000" 
         (keyup)="postDesCount(postCardDescription, 'post')" [(ngModel)]="postCardDescription" (ionChange)="postSomethignMore(postCardDescription)">
        </ion-textarea>      
        <p item-right style.color="{{postCardDescriptionLength > 9 ? '#4a4a4a' : 'red'}}" style="position:absolute;font-size: 1.0rem;color: #4a4a4a;right:0;bottom:0px;margin-bottom: 3px;"> <i>{{postCardDescriptionLength}}</i> </p>
      </ion-item> 
    </ion-card>   
    <p *ngIf="selectedPoll && cardStatus_2" style="color:#9b9b9b;font-size: 1.2rem; font-family: 'Lato', sans-serif;font-weight: bold; text-align:left;margin:20px 0px -10px 0px;"> ENTER POLL OPTIONS </p>
    <div *ngIf="selectedPoll && cardStatus_2">
      <ion-item class = "pollCss"  no-lines *ngFor="let input of inputs; let i=index" style="background-color:#e6e6e6;  margin: 15px 0px 0px 0px; border-radius: 4px;">
        <ion-input autocomplete="on" (ionFocus)="keyboardOpens('nothing')" autocorrect="on" type="text" [(ngModel)]="options[i]" (ionChange)="inputWatch(options,i)" placeholder="{{input.placeholder}}"></ion-input>
      </ion-item>
      <ion-item no-lines style="background-color:#e6e6e6;  margin: 15px 0px 0px 0px; border-radius: 4px;">
        <ion-input class="pollOption" (ionFocus)="keyboardOpens('nothing')" autocomplete="on" autocorrect="on" type="text" value="Can't Decide" placeholder="Can't Decide" readonly></ion-input>
      </ion-item>
    </div>

    <!-- preview of images while card creation -->
    <ion-row *ngIf="showLoader">
      <ion-col col-12 style="text-align: center;">
        <button ion-button style="background:transparent;box-shadow: none;">
          <img class="loader" style="width:60px;height:60px;margin-top: 12px;" src="assets/images/loader.svg" />
        </button>
      </ion-col>
    </ion-row>
    <ion-scroll scrollX="true" class="previewImages" style="height:218px;margin-right: 10px;padding: 10px;" *ngIf="cardStatus_2 && attachedImages && attachedImages.length>0"> 
      <ion-row style="margin:0;display: inline;">
        <ion-col col-12 [ngClass]="{'imageWidth_active':attachedImages.length>1, 'imageWidth_inactive':attachedImages.length == 1}" *ngFor="let image of attachedImages;let imgIndex = index;" style="display: inline-block;padding: 0px;">
          <img src="assets/images/close.svg" (click)="close('titleImg', imgIndex)" style="width:8%;position:absolute;z-index:1;right:0%;margin-top:-2%">
          <img class="cssthumb" [ngClass]="{'imageHeight_active':attachedImages.length>1, 'imageHeight_inactive':attachedImages.length == 1}" style="width:100%;border-radius:4px;height:180px;display: inline-block;" [src]="image">
        </ion-col> 
      </ion-row>          
    </ion-scroll>
    <ion-item no-lines *ngIf="cardStatus_2" style = "padding-left: 0px;">
      <button class="nextBtn" (click)="previous()" item-left>
        <img style="width:36px;" src="assets/images/backward.svg">
      </button>
      <button class="nextBtn" item-right>
        <img *ngIf="!post_question || (selectedPoll && optionsLength < 2)" src="assets/images/circle_icon_forward_disable.svg">
        <img *ngIf="(post_question && (selectedDiscuss || selectedReview || selectedRecommend)) || (selectedPoll && optionsLength > 1)" (click)="publish()" src="assets/images/circle_icon_forward.svg">
      </button>      
    </ion-item>
  </ion-card>  

  <!-- Adding Hashtag for card creation -->
  <ion-card *ngIf="addhashtag" style="padding-bottom:0px;margin-bottom: 20px;margin-top:10px;box-shadow: none" >
    <ion-row>          
      <ion-col col-12 style="text-align: center;padding-bottom: 15px;">        
        <p class="headingCss">REACH USERS BY</p>
        <button (click)="chooseType('interest','category')" [ngClass]="{'selectedChoice' : interestchoice == 'interest', 'unselectedChoice' : interestchoice != 'interest'}" round ion-button style="padding: 0px 10px;font-size:1.3rem;" >INTERESTS</button>
        <button (click)="chooseType('age','age_range')" [ngClass]="{'selectedChoice' : agechoice == 'age', 'unselectedChoice' : agechoice != 'age'}" ion-button round style="padding: 0px 10px;font-size: 1.3rem;" >AGE</button>
        <button (click)="chooseType('location', 'location')"  [ngClass]="{'selectedChoice' : locationChoice == 'location', 'unselectedChoice' : locationChoice != 'location'}" ion-button round style="padding: 0px 10px;font-size: 1.3rem;">LOCATION</button>
      </ion-col>  
    </ion-row>        
    <ion-item no-lines style="background-color: transparent;width:100%; margin: 5px 0px 5px 1px;">
      <button (click)="backToAskcrowd('createCard')" item-left style="background-color: transparent;">
        <img style="width:36px;" src="assets/images/backward.svg">
      </button>         
      <button *ngIf="selectedHashTags.length == 0" item-right style="background-color: transparent;margin-right:10px;">
        <img src="assets/images/circle_icon_done_disable.svg">
      </button>
      <button *ngIf="selectedHashTags.length > 0" (click)="showCrowdReach('hashtagTarget')" item-right style="background-color: transparent;margin-right:10px;">
        <img src="assets/images/circle_icon_done.svg">
      </button>
    </ion-item>
  </ion-card> 
  
  <!-- select to target -->
  <ion-card *ngIf="selectedChoice" style="padding-bottom:0px;margin-bottom: 20px;margin-top:10px;box-shadow: none">
    <!-- location settings -->
    <ion-row *ngIf="locationChoice">
      <ion-col col-12 style="text-align: center;padding: 18px 2px 22px 2px;">
        <button (click) = "selectLocation()" [ngClass]="{'unselectedChoice' : locationStatus != 'current', 'selectedChoice' : locationStatus == 'current'}" ion-button round style="border-radius:13px; box-shadow: 0 1px 0.4px 0 rgba(0,0,0,0.5);padding: 0px 18px;font-size: 1.5rem;text-align: center;border-radius:16px;">Near me ( {{nearMe}} )</button>
        <button (click) = "selectLocation()" [ngClass]="{'unselectedChoice' : locationStatus != 'specific', 'selectedChoice' : locationStatus == 'specific'}" ion-button round style="box-shadow: 0 1px 0.4px 0 rgba(0,0,0,0.5);padding: 0px 32px;font-size: 1.5rem;border-radius:16px;">Specific Location</button>
        <ion-searchbar *ngIf="this.locationStatus == 'specific'" [(ngModel)]="specific_location" placeholder="search" (ionInput)="getItems($event)"></ion-searchbar>
        <ion-list >
          <ion-item *ngFor="let place of places" (click)="selectedPlace(place)">
            {{ place.description }}
          </ion-item>
        </ion-list>
      </ion-col>
    </ion-row>
    <!-- interest settings -->
    <div *ngIf="interestchoice">
        <p style="font-size:1.8rem;font-weight:bold;text-align: center;color:#444444;line-height: 1;margin-bottom: 5px;">PICK #TAGS<br><span style="font-size:1.2rem;font-weight: 500;">Reach everyone with these #interests</span></p>
      <ion-row>
        <ion-col col-12 style="text-align: center;padding: 10px 2px;">
          <button *ngFor="let interest of interests;let i = index;" (click)="categorySelection(interest, i)" [ngClass]="{'selectedChoice':(interests[i].set == true), 'unselectedChoice_1':(interests[i].set == false)}" ion-button round >#{{interest.category.name}}</button>        
        </ion-col>
      </ion-row> 
      <!-- <p item-left style="font-size:1.8rem;text-align: center;">OR</p>  -->
      <p item-left style="font-size:1.8rem;font-weight:bold;text-align: center;line-height: 1;margin-bottom: 5px;">ADD CUSTOM #TAGS<br><span style="font-size:1.2rem;font-weight: 500;">Reach users interested in your unique #tags</span></p>   
      <div style="padding:8px;">
        <ion-item style="width: 94%;margin: 0 3%;position: relative;z-index: 2;">
          <ion-input class="hashtag" (keyup.enter)="enterTag(hashtagInput)" placeholder="E.g. #startup, #metoo, #redcurry" (ionChange)="changeHashTag(hashtagInput)" [(ngModel)]="hashtagInput" type="text">
          </ion-input>
        </ion-item>
        <ion-list class="hashtagsList" *ngIf="tags && tags.length > 0">
          <ion-item *ngFor="let tag of tags;" (click)="selectHashTag(tag)" style="min-height: 20px;height: 40px;">
            #{{tag}}
          </ion-item>
        </ion-list>      
        <!-- <p style="margin:0 20px;text-align:center;font-size:1.15rem;padding:6px 0;">Reach women interested in these #Tags.</p> -->
        <div style="text-align: center;">
          <button class="hashTagBtn" style="box-shadow: 0 1px 0.4px 0 rgba(0,0,0,0.5);padding: 2px 4px; border-radius: 15px;margin: 0px 3px 0px 3px;height: 30px;" *ngFor="let tag of selectedHashTags;let i = index;">       
            <ion-row>
              <ion-col (click)="editHashTag(tag, i)" style="color:#fff;font-size: 1.2rem;">
                #{{tag}}
              </ion-col>
              <ion-col (click)="deleteHashTag(tag, i)" style="padding:1px 0 0 5px;">
                <ion-icon name="close-circle" style="font-size:1.8em;"></ion-icon>
              </ion-col>
            </ion-row>
          </button>
        </div>      
      </div>
    </div>        
    <!-- age settings -->
    <ion-row *ngIf = "agechoice">
      <ion-col col-12 style="text-align: center;padding: 25px 2px;">
        <button (click)="specificAge('myAge')" ion-button round [ngClass]="{'selectedChoice':(specific_age == 'myAge'), 'unselectedChoice':(specific_age == 'specificage')}" style="box-shadow: 0 1px 0.4px 0 rgba(0,0,0,0.5);padding: 0px 15px;font-size: 1.5rem;text-align: center;border-radius:16px;">My age group ({{this.sg['myProfileData'].age_range}})</button>
        <button (click)="specificAge('specificage')" [ngClass]="{'selectedChoice':(specific_age == 'specificage'), 'unselectedChoice':(specific_age != 'specificage')}" ion-button round style="box-shadow: 0 1px 0.4px 0 rgba(0,0,0,0.5);padding: 0px 15px;font-size: 1.5rem;border-radius:16px;">Specific Age group</button>
          <ion-row *ngIf="specific_age == 'specificage'">
            <ion-col col-2></ion-col>
            <ion-col col-4 style="margin-left:5px;">
              <ion-select class="selectbox"  [(ngModel)]="min_age">
              <ion-option [value]="minage" *ngFor ="let minage of minAges" (ionSelect)="minAge($event)"> {{minage}}</ion-option>    
              </ion-select>
            </ion-col>
            <ion-col col-1 style="margin-right: 4px;margin-left: -15px;">
              <p style="font-size: 1.1rem;margin-top: 10px;">TO</p>
            </ion-col>       
            <ion-col col-4>
              <ion-select class="selectbox" [(ngModel)]="max_age">
              <ion-option [value]="maxage" *ngFor = "let maxage of maxAges"> {{maxage}}</ion-option>    
              </ion-select>
            </ion-col>
            <ion-col col-1></ion-col>
          </ion-row>
      </ion-col>
    </ion-row>
    <ion-item no-lines *ngIf = "interestchoice" style="background-color: transparent;width:100%;margin: 5px 0px 5px 2px;">
        <button item-left style="background-color: transparent;" (click)="backToAskcrowd('askCrowd')">
          <img style="width:36px;" src="assets/images/backward.svg">
        </button> 
        <button *ngIf="interestId.length < 1 && (selectedHashTags.length < 1)" item-right style="background-color: transparent;margin-right:8px;">
          <img src="assets/images/circle_icon_done_disable.svg">
        </button>
          <button *ngIf="interestId.length > 0 || (selectedHashTags.length > 0)" (click)="showCrowdReach('interestTarget')" item-right style="background-color: transparent;margin-right:8px;">
            <img src="assets/images/circle_icon_done.svg">
          </button>       
      </ion-item>    
    <ion-item *ngIf = "agechoice" no-lines style="background-color: transparent;width:100%;margin: 5px 0px 5px 2px;">
      <button item-left style="background-color: transparent;" (click)="backToAskcrowd('askCrowd')">
        <img style="width:36px;" src="assets/images/backward.svg">
      </button> 
      <button *ngIf="!((min_age && max_age) || (specific_age == 'myAge'))" item-right style="background-color: transparent;margin-right:8px;">
        <img src="assets/images/circle_icon_done_disable.svg">
      </button>
      <button *ngIf="((min_age && max_age) || (specific_age == 'myAge'))" (click)="showCrowdReach('ageTarget')" item-right style="background-color: transparent;margin-right:8px;">
        <img src="assets/images/circle_icon_done.svg">
      </button>       
    </ion-item>    
    <ion-item no-lines *ngIf = "locationChoice" style="background-color: transparent;width:100%;margin: 5px 0px 5px 2px;">
        <button item-left style="background-color: transparent;" (click)="backToAskcrowd('askCrowd')">
          <img style="width:36px;" src="assets/images/backward.svg">
        </button>
        <button (click)="showCrowdReach('locationTarget')" item-right style="background-color: transparent;margin-right:8px;">
          <img src="assets/images/circle_icon_done.svg">
        </button>       
    </ion-item>
  </ion-card>
  <!--Card creation Ends-->

  <!-- Timeline feed -->
  <p *ngIf="searchResults == 0" style="margin-top:50px;color:#444;font-size:2rem;text-align:center;">No Results found</p>
  <div *ngFor="let story of stories; let idx = index" class="card-stacked">
    <ion-card style="background-color:#e5e5e5;border-radius:3px;padding-bottom: 0px;margin-bottom:20px;" [hidden]="this.sg['cardHidden'][idx]">
      <ion-item (click)="zonesTimeline(story[0].feed.zone.id)" style="min-height: 10px;height: 22px;padding-left: 7px;" *ngIf="story[0].feed.zone">
        <img item-left src="assets/images/circle.svg" style="width:5%;margin-right:2px;">
        <p item-left style="color: #4a4a4a;font-size: 1.0rem;font-size: 1.15rem;font-weight: 500;">{{story[0].feed.zone.name}}</p>
      </ion-item>
    <ion-card class="animated2 fadeOutLeft" style="color:#444444;font-size:1.33rem;border-radius:3px;padding-bottom:3px;margin:0;width:100%;" [ngClass]="{ discoverBg :  (story[0].feed.type ==  ('Story.Article') || story[0].feed.type ==  ('Story.Discover')) , pollBg : (story[0].feed.type == ('Story.Poll')), askBg : ( story[0].feed.type == ('Story.Post' )), reviewBg :(story[0].feed.type == ('Story.Review')), fadeOutLeft :  (fadeOutLeft[idx] == true)}">
      <!-- <ion-card style="box-shadow: none;margin-bottom:10px;" [ngClass]="{ articleBorder :  (story[0].feed.type ==  ('Story.Article')),  discoverBorder : (story[0].feed.type ==  ('Story.Discover')), pollBorder : (story[0].feed.type == ('Story.Poll')), askBorder : ( story[0].feed.type == ('Story.Post' )), reviewBorder :(story[0].feed.type == ('Story.Review'))}"> -->
        <ion-card style="box-shadow: none;margin-bottom:10px;background: #fff;" [ngClass]="{ articleBorder :  (story[0].feed.type ==  ('Story.Article')),  discoverBorder : (story[0].feed.type ==  ('Story.Discover')), pollBorder : (story[0].feed.poll_type  == ('poll')),  recommendBorder : (story[0].feed.poll_type  == ('recommend')), askBorder : ( story[0].feed.type == ('Story.Post' )), reviewBorder :(story[0].feed.type == ('Story.Review'))}">
        <div *ngIf="story[0].feed.type == ('Story.Article')" class="row" style="height:20px">
          <div class="col text-right">
            <button ion-button style="color: #444;font-size: 1.1rem;margin: -22px -5px 0 0;background-color: #fbb03b;height: 19px;padding: 0px 0px 2px 0px;width: 90px;box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.10), 0 3px 1px -2px rgba(0, 0, 0, 0.1), 0 1px 5px 0 rgba(0, 0, 0, 0.10);z-index: 999;border-bottom-left-radius: 5px;">TOP READ
            </button>
          </div>
        </div>
        <div *ngIf="story[0].feed.type == ('Story.Discover')" class="row" style="height:20px">
          <div class="col text-right">
            <button ion-button style="color:#fff;font-size:1.1rem;margin: -21px -5px 0px 0px;height:19px;width:90px;padding:0px 0px 2px 0;font-weight:bold;border-bottom-left-radius:5px;border-top-left-radius:0px;box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.10), 0 3px 1px -2px rgba(0, 0, 0, 0.1), 0 1px 5px 0 rgba(0, 0, 0, 0.10);background-color:#BD2572;">DISCOVER
            </button>
          </div>
        </div>
        <div *ngIf="story[0].feed.type == 'Story.Opinion'" class="row" style="height:20px">
          <div class="col text-right">
            <button ion-button style="color:#444444; font-size: 1.3rem; margin: -20px 0px 0px; background-color: #fbb03b; height: 20px; width:90px; transition: none;padding:0px;box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.10), 0 3px 1px -2px rgba(0, 0, 0, 0.1), 0 1px 5px 0 rgba(0, 0, 0, 0.10);">OPINIONS
            </button>
          </div>
        </div>
        <div *ngIf="story[0].feed.type == 'Story.Article'" class="row" style="height:20px">
          <div class="col text-right">
          </div>
        </div>
        <div *ngIf="story[0].feed.type == 'Story.Discover'" class="row" style="height:20px">
          <div class="col text-right">
          </div>
        </div>
        <div *ngIf="story[0].feed.type == 'Story.Article'">
          <img (click)="morePopup(idx,story[0].id, 0, story[0].feed.id, story[0].feed.user.id)" class="moreHoriz" src="assets/images/more_horiz.png">
          <img [src]="story[0].feed.cover_image.url" *ngIf="story[0].feed.cover_image != null" (click)="goToLink(story[0].feed.link)" style="border-radius:15px;margin: -30px 10px 6px 10px;width:94%;max-width:94%;height:250px">
          <img src="assets/images/group.png" *ngIf="story[0].feed.cover_image == null" (click)="goToLink(story[0].feed.link)" style="border-radius:15px;margin: -30px 10px 6px 10px;width:94%;max-width:94%;">
          <div class=" grad1 divbox ">
            <p style="text-overflow: ellipsis;text-align: left;overflow: hidden;color: #fff;line-height: 27px;display: -webkit-box;-webkit-line-clamp: 2;margin:0 10px 0 10px;-webkit-box-orient: vertical;" (click)="goToLink(story[0].feed.link)" class="showcaseTitle">{{(story[0].feed.title)}}
            </p>            
            <p class="line-clamp1" style="text-align: left;font-weight:normal;color:#fff;font-size:1.4rem;position: absolute;margin: -25px 10px 0px 10px;">{{story[0].feed.domain}},&nbsp;{{story[0].feed.article_type | uppercase }}</p>
          </div>
          <img *ngIf="story[0].feed.attachments" [src]="story[0].feed.attachments[0].url">
          <p class="line-clamp" (click)="goToLink(story[0].feed.link)" style="margin-left: 12px;margin-right: 10px;font-size: 1.2rem;color: #444444;text-align: left;margin-bottom:-3px;line-height: 1.25;">{{(story[0].feed.description)}}</p>
        </div>
        <div  *ngIf="story[0].feed.type == 'Story.Discover'">
          <!-- <img (click)="morePopup(idx,story[0].id, 0, story[0].feed.id, story[0].feed.user.id)" class="moreHoriz1" src="assets/images/more_horiz.svg">          -->
          <p style="margin-top:-9%;color:#434343;font-size:13px;margin-left: 13px;text-align: left;font-family: 'Roboto', sans-serif">
               <span style="color:#4a4a4a; font-family: 'Roboto', sans-serif;font-size: 1.8rem;font-weight: 600;">{{story[0].feed.opinions_count}}</span>&nbsp;discoveries around
          </p>
          <p style="font-size: 1.5rem;line-height:17px;color:#444444;
          width:70%;word-wrap:break-word;margin-left:12px;margin-bottom:5px;text-align: left;font-family: 'Lato', sans-serif;
          font-weight: 600;">{{story[0].feed.title}}</p>          
          <ion-scroll scrollX="true" style="width:100%;height:180px;" *ngIf="story[0].feed.results.length > 0">
            <ion-card class="horizontal_scroll" *ngFor="let result of story[0].feed.results" style="margin: 0px 0px 0px 10px;width: 75%;height:171px">    
              <ion-row style="margin-left:-5px;margin-right:-5px;" (click)="goToLink(result.feed.link)">
                  <ion-col col-12 style="padding: 0 1px 1px 0px;">
                    <img class="cssthumb" *ngIf="!result.feed.cover_image || !result.feed.cover_image.url" src="assets/images/hackerImg.jpg" style="border-radius:10px 0 0 0;height:130px;">
                    <img class="cssthumb" *ngIf="result.feed.cover_image && result.feed.cover_image.url" [src]="result.feed.cover_image.url" onError="this.src='assets/images/hackerImg.jpg'" style="border-radius:10px 0 0 0;height:130px;">
                      <div  class="grad divbox1" >
                          <p style="padding-left: 5px;text-align: left;color:#fff;font-size: 1.1rem;font-weight: normal;  font-family: 'Roboto', sans-serif;" >{{result.feed.domain}}</p>  
                          <p  class="line-clamp" style="padding-left: 5px;line-height:1.2;text-align: left;color:#fff;font-size: 1.5rem;  font-family: 'Roboto', sans-serif;" >{{result.feed.title}}</p>
                      </div>
                  </ion-col>
                </ion-row>
                <ion-row>
                    <ion-col col-10 style="white-space: normal;">
                        <p class="line-clamp" style="font-size: 1.1rem;text-align: left;padding: 0px 5px 0px 8px;height:30px;line-height: 17px;  font-family: 'Roboto', sans-serif;">{{result.feed.excerpt}}</p>
                    </ion-col>
                    <ion-col col-2 (click)="sharePopover($event,result.feed.permalink,story[0].feed.discoveries,idx,0,story[0].feed.id,'parent')"> 
                    <p><img style="width: 16px;margin-top: 5px;" src="assets/images/share_1.svg"></p>
                    <!-- <div class="count">{{result.feed.shares}}</div> -->
                    </ion-col>
                </ion-row>     
            </ion-card>              
            <div [hidden]="cardDisabled[idx]" *ngIf="story[0].feed.opinions_count > 7" (click)="discoverMore(story[0].feed, idx)"  style="display:inline-block;  background-color:rgba(255,255,255,0.6); margin:0px 0px 0px 10px;width:16%; height:171px;position: absolute;   text-align: center;border-radius: 8px;">
              <button  style="background-color: transparent;margin-top:63px;">
                <img class="text-center"  src="assets/images/circle_icon_forward.svg">
              </button>
            </div>
          </ion-scroll>
        </div>        
        <ion-item class="cardItem" *ngIf="(story[0].feed.type == 'Story.Poll') || (story[0].feed.type == 'Story.Post') || (story[0].feed.type == 'Story.Review')" style="background-color:transparent;padding-left:5px;border-top-right-radius:0px">
          <ion-avatar (click)="profileUser(story[0].feed.user.id)" item-start style="margin-right:5px;margin-left:5px;margin-top: 5px;">
            <img class="cssthumb" *ngIf="(story[0].feed.user.profile_image == null)" src="assets/images/placeholder_user1.png"  style="border-radius: 50%;height: 54px;width: 54px;">
            <img class="cssthumb" *ngIf="(story[0].feed.user.profile_image != null)" [src]="story[0].feed.user.profile_image.url" onError="this.src='assets/images/placeholder_user1.png'" style="border-radius:50%;height:54px;width:54px;">
            <!-- <img *ngIf="(story[0].feed.user.avatar_image != null && story[0].feed.user.avatar_toggle == true)" [src]="story[0].feed.user.avatar_image.url" onError="this.src='assets/images/placeholder_user1.png'" style="border-radius: 10px;height:50px;width:50px;"> -->
          </ion-avatar>          
          <button  [ngClass]="{ discoverBgColor :  (story[0].feed.type ==  ('Story.Article') || story[0].feed.type ==  ('Story.Discover')) , pollBgColor : (story[0].feed.poll_type  == ('poll')),  recommendBgColor : (story[0].feed.poll_type  == ('recommend')), discussBgColor : ( story[0].feed.type == ('Story.Post' )), reviewBgColor :(story[0].feed.type == ('Story.Review'))}"  
          style="height:19px;font-size:1.1rem;padding:0 10px 2px 10px;margin: 0px -3px 0px 0px;min-width:90px;" class="targetMethodLabel" ion-button item-right>{{cardMethod(story[0].feed)}}
          </button>
          <ion-label style="padding-top: 10px;">
          <p (click)="profileUser(story[0].feed.user.id)" style="	font-family: 'Roboto', sans-serif;color:#444444;font-size:1.4rem;margin-left:-6px;z-index:1;position:absolute;padding-top:3px;font-weight:500;text-transform: capitalize">{{splittingName(story[0].feed.user)}}</p>
          <!-- <p (click)="profileUser(story[0].feed.user.id)" style="	font-family: 'Roboto', sans-serif;color:#444444;margin-left:-6px;padding-top:20px;z-index:1;position:absolute;font-size:1.4rem;font-weight:400;width:50%;text-align: left"> <i>wants your {{getText(story[0])}}</i></p> -->
          <p *ngIf="(story[0].feed.user.display_location) && (story[0].feed.user.display_location != '')" style="font-size:1.0rem;color:#444444;margin-left:-6px;padding-top:23px;text-align: left;font-family: 'Roboto', sans-serif;">
            <span>{{story[0].feed.user.display_location | uppercase}}</span>
          </p>
          <p style="font-size:1.0rem;color:#444444;margin-left:-6px;padding-top:5px;text-align: left;font-family: 'Roboto', sans-serif;">
            <span (click)="morePopup(idx,story[0].id, 0, story[0].feed.id, story[0].feed.user.id)"> <img style="width:25px;position: absolute;bottom:0px;right:12px;top:47px" src="assets/images/more_horiz.svg"></span>              
          </p>
          
          <p *ngIf="!(story[0].feed.user.display_location) || (story[0].feed.user.display_location == '')" style="font-size:1.0rem;display:inline-block;color:#444444;margin-left:-6px;padding-top:42px;text-align: left;">              
            <span>- - -&nbsp;&nbsp;</span>
            <span (click)="morePopup(idx,story[0].id, 0, story[0].feed.id, story[0].feed.user.id)"> 
              <img style="width:25px;position: absolute;bottom:0px;right:12px;top:47px" src="assets/images/more_horiz.svg">
            </span>              
          </p>
          <p style="font-size:1.0rem;font-weight:normal;color:#444444;margin-left:-6px;text-align: left;	font-family: 'Roboto', sans-serif;">
            <span style="font-weight:500;font-size:1.1rem;	font-family: 'Roboto', sans-serif;">{{displayTime(story[0].feed.published_at)}}</span>              
          </p>
          </ion-label>
        </ion-item>
        <p *ngIf="!(story[0].feed.type =='Story.Discover')" style="font-family: 'Lato', sans-serif;font-size: 1.8rem;line-height:18px;color:#444;padding:10px 10px 10px 10px;text-align: left;font-weight:600;"> {{displayTitle(story[0].feed.title)}}</p>
        <!-- <p *ngIf="story[0].feed.type =='Story.Poll'" style="font-family:'Lato', sans-serif;font-size: 1.8rem;line-height:18px;color:#444;padding:10px;text-align: left;font-weight:600;"> {{story[0].feed.title}}</p> -->
        <p class="line-clamp3" *ngIf="story[0].feed.type != 'Story.Discover' && story[0].feed.description && (!story[0].feed.isSeeMore || story[0].feed.isSeeMore != true)" style="font-family:'Lato', sans-serif;font-size: 1.6rem;line-height: 1.5;color:#444;padding:0px 10px 0px 10px;margin-bottom: 12px;text-align: left;font-weight:500;">
          {{(story[0].feed.description)}}</p>
        <p (click)="tapToSeeMore(idx, story[0].feed.description)" *ngIf="story[0].feed.description && (!story[0].feed.isSeeMore || story[0].feed.isSeeMore != true) && story[0].feed.description.length > 130" style="font-family:'Lato', sans-serif;font-size: 1.15rem;line-height:20px;color:#444;text-align: right;font-weight:500;padding: 0 15px 10px 0;"><i>SEE MORE…</i></p>
        
        <p class="angular-with-newlines" *ngIf="story[0].feed.type != 'Story.Discover' && story[0].feed.description && story[0].feed.isSeeMore && story[0].feed.isSeeMore == true" style="font-family:'Lato', sans-serif;font-size: 1.6rem;line-height: 1.5;color:#444;padding:0px 10px 10px 10px;text-align: left;font-weight:500;"> {{story[0].feed.description}}</p>
        <p (click)="tapToSeeLess(idx, story[0].feed.description)" *ngIf="story[0].feed.description && story[0].feed.isSeeMore && story[0].feed.isSeeMore == true && story[0].feed.description.length > 130" style="font-family:'Lato', sans-serif;font-size: 1.15rem;line-height:20px;color:#444;text-align: right;font-weight:500;padding: 0 15px 10px 0;"><i>SEE LESS…</i></p>
        <!-- title preview starts for card face -->
        <ion-row *ngIf="story[0].feed.link_preview && (story[0].feed.link_preview.image || story[0].feed.link_preview.description || story[0].feed.link_preview.title)">
          <ion-card (click)="goToLink(story[0].feed.link_preview.url)" style="background-color:#f8f3e7;border-radius: 4px;margin:0 0 10px 9px;">
            <!-- <p *ngIf="this.sg['myProfileData'] && this.sg['myProfileData'].avatar_toggle == true && this.sg['myProfileData'].avatar_name" class="text1" style="text-transform:capitalize;text-align: left"><b>{{this.sg['myProfileData'].avatar_name}}</b></p>
            <p *ngIf="this.sg['myProfileData'] && this.sg['myProfileData'].avatar_toggle == false && this.sg['myProfileData'].name" class="text1" style="text-transform:capitalize;text-align: left"><b>{{this.sg['myProfileData'].name}}</b></p>
            <p style="text-transform:capitalize" *ngIf="this.sg['myProfileData'] && ((!this.sg['myProfileData'].name && this.sg['myProfileData'].avatar_toggle == false) || (!this.sg['myProfileData'].avatar_name && this.sg['myProfileData'].avatar_toggle == true))" class="text1" ><b>User</b></p>
            <p class="text1" style="font-weight:normal;text-align: left">
              {{story[0].feed.title}}                    
            </p> -->
            <ion-item style="background-color:transparent; padding-left:0px;">
              <ion-thumbnail item-left style="margin-left:8px;margin-top:0px;">
                <img *ngIf="story[0].feed.link_preview.image && story[0].feed.link_preview.image.url" [src]="story[0].feed.link_preview.image.url" style="border-radius:10px;margin-top:4px;" onError ="this.src='assets/images/add_pic.svg'">         
              </ion-thumbnail>            
              <ion-label style="white-space:normal;">
                <p item-right class="line-clamp"  style="font-size: 1.4rem;font-weight: 500;color: #444444;margin: 4px 0px 13px 0;text-align: left">{{story[0].feed.link_preview.title}}</p>
                <p item-right class="line-clamp3" style="font-size:1.1rem;font-weight:normal;color:#444444;text-align: left;margin: 4px 0px;">{{story[0].feed.link_preview.description}}</p>
              </ion-label>
            </ion-item>
            <p class="line-clamp1" style="font-size: 1.3rem;color: #039BE5;text-align: left;margin: 0px 10px;">{{story[0].feed.link_preview.url}}</p>      
          </ion-card>
        </ion-row>
        <!-- title preview ends for card face -->                  
        <ion-scroll scrollX="true" style="height:180px;margin:10px 8px 0 8px;" *ngIf="story[0].feed.attachments && story[0].feed.attachments.length>0"> 
          <ion-row style="margin:0;display: inline;">
            <ion-col col-12 style="padding: 0px;" *ngFor="let attachment of story[0].feed.attachments;let img_index = index;" (click)="viewImage(img_index, story[0].feed.attachments)">
              <img class="cssthumb" [ngClass]="{'imageWidth_active':story[0].feed.attachments.length>1, 'imageWidth_inactive':story[0].feed.attachments.length == 1}" *ngIf="attachment.url != null" style="border-radius:4px;height:160px;margin-bottom:16px;display: inline-block;" [src]="attachment.url">
            </ion-col> 
          </ion-row>          
        </ion-scroll>
        <div class="progress" (click)="response(option.id,option,idx,i,option.response_count, story[0])" *ngFor="let option of story[0].feed.options;let i = index"
        style="margin-top:4px;" [ngClass]="{'selected_item':getClass(option.id,story[0].user.user_responses)}">
          <span class="progress-text line-clamp">{{option.name}}</span>
          <div class="value" *ngIf="this.sg['myProfileData'] && ((story[0].user.is_answered == true) || (myProfileId() == cardOwner(story[0].feed.user.id)))">{{option.response_count}}</div>
          <div class="progress-bar" style.background = {{story[0].feed.color_scheme}} style="font-family: 'Roboto', sans-serif;" *ngIf="this.sg['myProfileData'] && (story[0].user.is_answered == true || (myProfileId() == cardOwner(story[0].feed.user.id)))" role="progressbar" aria-valuenow="70" aria-valuemin="0" aria-valuemax="100" style.width={{option.response_count}}%>
          </div>
        </div>
        <p *ngIf="this.sg['myProfileData'] && (story[0].feed.options && story[0].feed.type == 'Story.Poll' && story[0].user.is_answered == false && (myProfileId() != cardOwner(story[0].feed.user.id)) && this.sg['myProfileData'])" style="color:#4a4a4a;font-size: 1.1rem;margin:10px 0 10px 25px;text-align: left;font-weight:normal;font-family: 'Roboto', sans-serif;">{{getVotingText(story[0])}}</p>
        
        <div *ngIf="story[0].feed.type == 'Story.Review' && this.sg['myProfileData']">
          <div *ngIf="this.sg['myProfileData'] && ((story[0].user.is_answered == true) || (myProfileId() == cardOwner(story[0].feed.user.id))) && story[0].feed.type == 'Story.Review'">
            <hr style="margin:10px;background-color: #c8c7cc;height:1px;">
            <ion-row>
              <ion-col col-9>
                <div *ngIf="this.sg['myProfileData'] && ((story[0].user.is_answered == true) || (myProfileId() == cardOwner(story[0].feed.user.id))) && story[0].feed.type == 'Story.Review'" style="display: block;">
                  <canvas baseChart [datasets]="barChartData[idx]" [labels]="barChartLabels" [options]="barChartOptions" [colors]="barChartColors" [legend]="barChartLegend" [chartType]="barChartType"></canvas>
                </div>
              </ion-col>
              <ion-col col-3>
                <ion-row>
                  <ion-col col-12 style="text-align: center;padding:0px;color:#444444;font-size:3.0rem;">{{story[0].feed.votes}}</ion-col>
                  <ion-col *ngIf="story[0].feed.votes < 2" col-12 style="text-align: center;padding:0px;color:#444444;font-size:1.2rem;font-weight:500;margin-top:-10px">Rating</ion-col>
                  <ion-col *ngIf="story[0].feed.votes > 1" col-12 style="text-align: center;padding:0px;color:#444444;font-size:1.2rem;font-weight:500;margin-top:-10px">Ratings</ion-col>
                  <ion-col col-12 style="text-align: center;padding:0px;color:#444444;font-size:1.2rem;font-weight:500;margin-top:5px">Avg Rating</ion-col>
                  <ion-col col-12 style="text-align: center;padding:0px;color:#444444;font-size:3.0rem;margin-top:-6px">{{story[0].feed.average}}</ion-col>
                </ion-row>
              </ion-col>
            </ion-row>
            <ion-row *ngIf="story[0].user.is_answered == true">
              <ion-col col-10>
                <div *ngFor="let response of story[0].feed.responses" style="margin-top:15px">
                  <div class="slider" *ngIf="((response.user.id == this.sg['myProfileData'].id) && (story[0].feed.type == 'Story.Review'))">
                    <div class="progressReview">
                      <div class="progress-bar progress-bar-danger" *ngIf="response.percentage < 7" role="progressbar" aria-valuemin="0" aria-valuemax="100" style.width={{(response.percentage)*10}}%>
                      </div>
                      <div class="progress-bar progress-bar-warning" aria-valuemin="0" aria-valuemax="100" *ngIf="(response.percentage > 6) &amp;&amp; (response.percentage < 9)" role="progressbar" style.width={{(response.percentage)*10}}%>
                      </div>
                      <div class="progress-bar progress-bar-success" aria-valuemin="0" aria-valuemax="100" *ngIf="response.percentage > 8" role="progressbar" style.width={{(response.percentage)*10}}%>
                      </div>
                    </div>
                    <div class="value" style="margin-top:7px;font-size:0.8rem;width:13%">
                      <p style="font-size:1.1rem">{{response.percentage}}/10</p>
                    </div>
                  </div>
                </div>
              </ion-col>
              <ion-col col-2 style="padding:10px 0 0 0;font-size:1.1rem">
                Your
                <br>Rating
              </ion-col>
            </ion-row>
          </div>
          <div *ngIf="this.sg['myProfileData'] && (story[0].user.is_answered == false) && (myProfileId() != cardOwner(story[0].feed.user.id)) && (story[0].feed.type == 'Story.Review')" style="margin-top:10px">
            <div class="slider_1">
              <ion-range debounce="1500" [disabled]="rangeDisabled[story[0].feed.id]" (ionChange)="myMethod(percentage,story[0].feed.id, story[0].feed, idx)" [(ngModel)]="percentage[story[0].feed.id]" min="0" max="10" style="padding:7px 0px 5px 15px;" [color]="color">
                <ion-label range-right style="color:#444444;font-size:1.4rem;margin-right:10px;">{{percentage[story[0].feed.id]}}/10</ion-label>
              </ion-range>
            </div>
            <ion-checkbox [(ngModel)]="checked[story[0].feed.id]" (ionChange)="updateCheckbox(story[0].feed.id, story[0].feed, idx)">
            </ion-checkbox>
            <p style="display: inline-block;color:#444;font-size:11px;position:absolute;z-index:1;margin:22px 0px 0px -30px">not sure</p>
          </div>          
        </div>
        <p *ngIf="story[0].feed.poll_type == 'recommend' && story[0].feed.options.length != 0" style="margin:0px 10px;padding:5px 10px;color:#444;font-weight:normal;text-align: left;font-family: 'Roboto', sans-serif;">vote one above, or</p>

        <p *ngIf="story[0].feed.type == 'Story.Review'" style="margin:0px 10px 10px;padding:0px 10px;color:#4a4a4a;font-weight:normal;text-align: left;font-family: 'Roboto', sans-serif;font-size:1.1rem;">{{getReviewText(story[0])}}</p>
        
        <div>
          <ion-list *ngIf="isValidExp[story[0].feed.id] == true && (story[0].feed.type == 'Story.Post' || story[0].feed.type == 'Story.Poll')" style="border-radius:15px 15px 0 0;background:#fff;min-height:50px;max-height:145px;overflow: auto;padding: 10px 0;margin:0;padding: 10px 0;">
            <ion-item *ngFor="let person of people" style="padding: 0px 10px 5px 16px;text-transform:capitalize;background: transparent;min-height:4.0rem;" (click)="selectName(person, story[0].feed.id)">
              <ion-avatar item-start>
                <img *ngIf="person.avatar" [src]="person.avatar" onError="this.src='assets/images/placeholder_user1.png'">
                <img *ngIf="!person.avatar" src="assets/images/placeholder_user1.png">
              </ion-avatar>     
              <p item-left style="padding-left:16px;">{{person.name}}</p>    
            </ion-item>
          </ion-list>
          <ion-row style="margin-bottom: 10px;">              
            <ion-col col-10 style="padding-left: 8px;"> 
              <ion-item style="border-radius: 4px; background-color: #F1F1F1;padding-left: 4px;">
                <!-- <div (click)="profileUser(story[0].feed.user.id)"> -->
                  <img (click)="myProfilePage()" item-left *ngIf="!this.sg['myProfileData']" style="float: left;border-radius:50%;height:40px;width:40px;" src="assets/images/placeholder_user1.png">                     
                  <div (click)="myProfilePage()" item-left *ngIf="this.sg['myProfileData']" style="margin:5px 0">
                    <img class="cssthumb" *ngIf="(this.sg['myProfileData'].profile_image == null && this.sg['myProfileData'].avatar_toggle == false) || (this.sg['myProfileData'].avatar_image == null && this.sg['myProfileData'].avatar_toggle == true)" style="float: left;border-radius: 50%;height:40px;width:40px;" src="assets/images/placeholder_user1.png">
                    <img class="cssthumb" *ngIf="this.sg['myProfileData'].avatar_image != null && this.sg['myProfileData'].avatar_toggle == true" style="float: left;border-radius: 50%;height:40px;width:40px;" [src]="this.sg['myProfileData'].avatar_image.url" onError ="this.src='assets/images/placeholder_user1.png'">
                    <img class="cssthumb" *ngIf="this.sg['myProfileData'].profile_image != null && this.sg['myProfileData'].avatar_toggle == false" style="float: left;border-radius: 50%;height:40px;width:40px;" [src]="this.sg['myProfileData'].profile_image.url" onError ="this.src='assets/images/placeholder_user1.png'">
                  </div> 
                <!-- </div>                   -->
                <ion-textarea  [style.height]="myHeight" item-right [ngClass]="{ 'activePadding' :  (activatePadding ==  true), 'inactivePadding' :  (activatePadding ==  false)}" (input)="postCommentBox(idx)" id="postCommentBox{{idx}}"  (ionFocus)="keyboardOpens('nothing')" rows="1" style="padding-top:10px;margin:auto;border-radius:4px;font-size: 1.7rem;line-height: 1.4;padding-left:10px;"
                  autocomplete="on" autocorrect="on" (ionChange)="postCommentChange(story[0].feed.id, textInput)" placeholder="{{getPlaceholder(story[0].feed)}}" type="text" [(ngModel)]="textInput[story[0].feed.id]"></ion-textarea>
              </ion-item>                  
            </ion-col>
            <ion-col col-2 >
              <button class="animated animatedInfinite" [ngClass]="{ 'pulse' :  (isAnimation[story[0].feed.id] == true), '' :  (isAnimation[story[0].feed.id] == false)}" *ngIf="(textInput[story[0].feed.id] && (story[0].feed.type == 'Story.Post' || story[0].feed.type == 'Story.Poll' || story[0].feed.type == 'Story.Review'))" clear style="background-color: transparent;margin: 0px 0px 2px 0px;position: absolute;bottom: 0;padding: 0px;width:40px;height:40px;">
                <img  type="submit" (click)="submitComment(story[0].feed,idx)" src="assets/images/circle_icon_done.svg">
              </button>
              <button *ngIf="!textInput[story[0].feed.id] && (story[0].feed.type == 'Story.Post' || story[0].feed.type == 'Story.Poll' || story[0].feed.type == 'Story.Review')" clear style="background-color: transparent;margin: 0px 0px 2px 0px;position: absolute;bottom: 0;padding: 0px;width:40px;height:40px;">
                <img type="submit" src="assets/images/circle_icon_done_disable.svg">
              </button>
            </ion-col>
          </ion-row>
        </div>
      </ion-card>
      <!-- Hash tags starts -->
      <div style="padding:0 7px 10px 7px" *ngIf="isShowAllHashtags[idx] != 'true'">
        <button (click)="filterByHashtag_1(story[0].feed.hashtags[0], myHashtag(story[0].feed.hashtags[0]))" [ngClass]="{'backendTagActive':(myHashtag(story[0].feed.hashtags[0]) == true), 'backendTagInactive':(myHashtag(story[0].feed.hashtags[0]) != true)}"  *ngIf="story[0].feed.hashtags && story[0].feed.hashtags.length > 0" ion-button style="box-shadow: none;height:2.8rem;margin:0.4rem 0.1rem;">
          #{{story[0].feed.hashtags[0]}}
        </button>        <button (click)="filterByHashtag_1(story[0].feed.hashtags[1], myHashtag1(story[0].feed.hashtags[1]))" [ngClass]="{'backendTagActive':(myHashtag1(story[0].feed.hashtags[1]) == true), 'backendTagInactive':(myHashtag1(story[0].feed.hashtags[1]) != true)}" *ngIf="story[0].feed.hashtags && story[0].feed.hashtags.length > 1" ion-button style="box-shadow: none;height:2.8rem;margin:0.4rem 0.1rem;">

          #{{story[0].feed.hashtags[1]}}
        </button>
        <button (click)="filterByHashtag_1(story[0].feed.hashtags[2], myHashtag2(story[0].feed.hashtags[2]))" [ngClass]="{'backendTagActive':(myHashtag2(story[0].feed.hashtags[2]) == true), 'backendTagInactive':(myHashtag2(story[0].feed.hashtags[2]) != true)}" *ngIf="story[0].feed.hashtags && story[0].feed.hashtags.length > 2" ion-button style="box-shadow: none;height:2.8rem;margin:0.4rem 0.1rem;">
          #{{story[0].feed.hashtags[2]}}
        </button>
        <button (click)="filterByHashtag_1(story[0].feed.hashtags[3], myHashtag3(story[0].feed.hashtags[3]))" [ngClass]="{'backendTagActive':(myHashtag3(story[0].feed.hashtags[3]) == true), 'backendTagInactive':(myHashtag3(story[0].feed.hashtags[3]) != true)}" *ngIf="story[0].feed.hashtags && story[0].feed.hashtags.length > 3" ion-button style="box-shadow: none;height:2.8rem;margin:0.4rem 0.1rem;">
          #{{story[0].feed.hashtags[3]}}
        </button>
        <button (click)="filterByHashtag_1(story[0].feed.hashtags[4], myHashtag4(story[0].feed.hashtags[4]))" [ngClass]="{'backendTagActive':(myHashtag4(story[0].feed.hashtags[4]) == true), 'backendTagInactive':(myHashtag4(story[0].feed.hashtags[4]) != true)}" *ngIf="story[0].feed.hashtags && story[0].feed.hashtags.length > 4" ion-button style="box-shadow: none;height:2.8rem;margin:0.4rem 0.1rem;">
         #{{story[0].feed.hashtags[4]}}
        </button>
        <button *ngIf="story[0].feed.hashtags && story[0].feed.hashtags.length > 5" (click)="showMoreHashtags(story[0].feed.hashtags, idx)" ion-button style="border-radius: 14px;padding: 0px 10px;box-shadow: none;height:2.8rem;margin:auto 0 auto 10px;background-color: #fff;font-family: 'Roboto', sans-serif;color:#4a4a4a;border: 1px solid #BD2572;">
          +{{story[0].feed.hashtags.length-5}}
        </button>
      </div> 
      <div style="padding:0 7px 10px 7px;"  *ngIf="isShowAllHashtags[idx] == 'true'">
        <button *ngFor="let tag of story[0].feed.hashtags;let tagIdx = index;" [ngClass]="{'backendTagActive':(myHashtag4(tag) == true), 'backendTagInactive':(myHashtag4(tag) != true)}" (click)="filterByHashtag_1(tag, isMyhashtag(tag))" ion-button style="box-shadow: none;height:2.8rem;margin:0.4rem 0.1rem;">
          #{{tag}}
        </button>
        <button (click)= "hideMoreHashtags(story[0].feed.hashtags, idx)" ion-button class="cssBtn">
          <img style="width:30px;" src="assets/images/chevron-left.svg" />
        </button>
      </div>       
       <!-- Hash tags ends -->
      <ion-row style="margin:0px 5px 0px 6px">      
        <ion-col col-5 *ngIf="story[0].feed.type != 'Story.Discover' && !story[0].feed.zone" style="padding-left: 10px;padding-top: 1px;text-align: left;">        
        </ion-col>
        <ion-col col-6 *ngIf="story[0].feed.type != 'Story.Discover' && story[0].feed.zone" style="padding-left: 10px;padding-top: 1px;text-align: left;">        
        </ion-col>        
        <ion-col col-7 *ngIf="story[0].feed.type == 'Story.Article' ||  story[0].feed.type == 'Story.Discover'" ></ion-col>                 
        <ion-col *ngIf="story[0].user.liked == true && !(story[0].feed.type == 'Story.Article' ||  story[0].feed.type == 'Story.Discover')" (click)="undoAction(story[0].feed.id, idx, story[0].feed.likes,$event, 'parent', 0, 'like')"  >
          <img *ngIf="story[0].user.liked == true" src="assets/images/thumbs_up_colored.svg"  class="imgIcon">
          <div  *ngIf="story[0].user.liked == true"  class="count">{{story[0].feed.likes}}</div>
        </ion-col>
        <ion-col *ngIf="story[0].user.liked == false && !(story[0].feed.type == 'Story.Article' ||  story[0].feed.type == 'Story.Discover')"  (click)="likeButton(story[0].feed.id,idx,story[0].feed.likes,$event, 'parent', 0, story[0].feed.title)">
          <img *ngIf="story[0].user.liked == false" src="assets/images/thumbs_up.svg"  class="imgIcon">
          <div  *ngIf="story[0].user.liked == false"  class="count">{{story[0].feed.likes}}</div>
        </ion-col>

        <ion-col *ngIf=" story[0].user.liked == true && (story[0].feed.type == 'Story.Article' ||  story[0].feed.type == 'Story.Discover')"  (click)="undoAction(story[0].feed.id,idx,story[0].feed.likes,$event, 'discover', 0, 'discoverDislike')">  
          <img *ngIf="story[0].user.liked == true" src="assets/images/like.svg" class="imgIcon">
          <div *ngIf="story[0].user.liked == true"  class="count">{{story[0].feed.likes}}</div>
        </ion-col>
        <ion-col *ngIf=" story[0].user.liked == false && (story[0].feed.type == 'Story.Article' ||  story[0].feed.type == 'Story.Discover')" (click)="likeButton(story[0].feed.id, idx, story[0].feed.likes,$event, 'discover', 0, story[0].feed.title)" >
          <img *ngIf="story[0].user.liked == false" src="assets/images/unlike.svg"  class="imgIcon">
          <div *ngIf="story[0].user.liked == false"  class="count">{{story[0].feed.likes}}</div>
        </ion-col>

        <ion-col *ngIf="story[0].user.disliked == true && !(story[0].feed.type == 'Story.Article' ||  story[0].feed.type == 'Story.Discover')"  (click)="undoAction(story[0].feed.id, idx, story[0].feed.likes,$event, 'parent', 0, 'dislike')" >
         <img *ngIf="story[0].user.disliked == true" src="assets/images/thumbs_down_colored.svg"  class="imgIcon">
          <div *ngIf="!story[0].feed.dislikes && story[0].user.disliked == true" class="count">0</div>
          <div *ngIf="story[0].feed.dislikes && story[0].user.disliked == true" class="count">{{story[0].feed.dislikes}}</div>
        </ion-col>
        <ion-col *ngIf=" story[0].user.disliked == false && !(story[0].feed.type == 'Story.Article' ||  story[0].feed.type == 'Story.Discover')"  >
          <img *ngIf="!story[0].user.disliked || story[0].user.disliked == false" src="assets/images/thumbs_down.svg" (click)="unlikeButton(story[0].feed.id,idx,story[0].feed.dislikes,$event, 'parent', 0, story[0].feed.discoveries)" class="imgIcon">
          <div *ngIf="!story[0].feed.dislikes &&  story[0].user.disliked == false" class="count">0</div>
          <div *ngIf="story[0].feed.dislikes &&  story[0].user.disliked == false" class="count">{{story[0].feed.dislikes}}</div>
        </ion-col>

        <ion-col *ngIf="story[0].user.commented == true"  (click)="commenting(story[0].feed.id, story[0].feed.comments, story[0].feed.title, story[0].user, story[0].feed)" >
          <img  *ngIf="story[0].user.commented == true" src="assets/images/comment_colored.svg" class="imgIcon">
          <div  *ngIf="story[0].user.commented == true" class="count">{{story[0].feed.comments.length}}</div>
        </ion-col>

        <ion-col *ngIf="story[0].user.commented == false"  (click)="commenting(story[0].feed.id, story[0].feed.comments, story[0].feed.title, story[0].user, story[0].feed)">
          <img *ngIf="story[0].user.commented == false" src="assets/images/comment_1.svg"  class="imgIcon">
          <div  *ngIf="story[0].user.commented == false" class="count">{{story[0].feed.comments.length}}</div>
        </ion-col>

        <ion-col  (click)="sharePopover($event,story[0].feed.permalink, story[0].feed.title, idx, 0, story[0].feed.id, 'parent')">
          <img src="assets/images/share_1.svg" class="imgIcon">
          <div class="count">{{story[0].feed.shares}}</div>
        </ion-col>
        <ion-col  *ngIf="story[0].user.bookmarked == true && !story[0].feed.zone"  (click)="unfollow(story[0].feed.id,idx,story[0].feed.follows,$event, 'parent',0,story[0].feed.discoveries)">
          <img *ngIf="story[0].user.bookmarked == true" src="assets/images/bookmark_colored.svg" class="imgIcon">
          <div *ngIf="story[0].user.bookmarked == true" class="count">{{story[0].feed.follows}}</div>
        </ion-col>
        <ion-col *ngIf="story[0].user.bookmarked == false && !story[0].feed.zone" (click)="follow(story[0].feed.id,idx,story[0].feed.follows,$event, 'parent',0, story[0].feed.title)" >
          <img *ngIf="story[0].user.bookmarked == false" src="assets/images/bookmark.svg"  class="imgIcon">
          <div  *ngIf="story[0].user.bookmarked == false" class="count">{{story[0].feed.follows}}</div>
        </ion-col>
      </ion-row>
      <!-- <div *ngIf="story[0].feed.latest_comments && story[0].feed.latest_comments.length == 1">
        <ion-item *ngFor="let comment of story[0].feed.latest_comments" (click)="commenting(story[0].feed.id, story[0].feed.comments, story[0].feed.title, story[0].user, story[0].feed)" 
        style="width:94%;margin:0px 10px 10px 10px;border-radius:10px;background-color: #f7f7f7;box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.10), 0 3px 1px -2px rgba(0, 0, 0, 0.05), 0 1px 5px 0 rgba(0, 0, 0, 0.0);background-color: #fff">
          <ion-avatar item-left style="margin:11px 0px 11px 0px;">
            <img style="border-radius:10px;" *ngIf="comment.user.profile_image != null && comment.user.avatar_toggle == false" [src]="comment.user.profile_image.url" onError="this.src='assets/images/placeholder_user1.png'">
            <img style="border-radius:10px;" *ngIf="comment.user.avatar_image != null && comment.user.avatar_toggle == true" [src]="comment.user.avatar_image.url" onError="this.src='assets/images/placeholder_user1.png'">
            <img style="border-radius:10px;" *ngIf="((!comment.user.profile_image || !comment.user.profile_image.url) && !comment.user.avatar_toggle) || ((!comment.user.avatar_image || !comment.user.avatar_image.url) && comment.user.avatar_toggle)" src="assets/images/placeholder_user1.png">
          </ion-avatar>
          <ion-label style="white-space:normal; height: 50px;line-height: unset;">
            <p *ngIf="!comment.user.avatar_toggle" style="font-size: 1.2rem;font-weight: bold;text-align: left;margin-top:4px;font-family: 'Roboto', sans-serif;">{{comment.user.name}}</p>
            <p *ngIf="comment.user.avatar_toggle" style="font-size: 1.2rem;font-weight: bold;text-align: left;font-family: 'Roboto', sans-serif;">{{comment.user.avatar_name}}</p>
            <p class="line-clamp" style="color: #000;font-size: 1.2rem;font-weight: normal;text-align: left;font-family: 'Roboto', sans-serif;"> {{comment.description}} </p>
          </ion-label>
        </ion-item>
      </div>       -->
       <div *ngIf="story[0].feed.latest_comments && story[0].feed.latest_comments.length == 1">
        <ion-item *ngFor="let comment of story[0].feed.latest_comments; let commentIdx = index;" style="width:94%;margin:0px 10px 10px 10px;border-radius:4px;background-color: #F1F1F1;box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.10), 0 3px 1px -2px rgba(0, 0, 0, 0.05), 0 1px 5px 0 rgba(0, 0, 0, 0.0);">
          <ion-avatar (click)="profileUser(story[0].feed.user.id)" item-left style="margin:11px 0px 11px 0px;">
            <img class="cssthumb" style="border-radius:50%;" *ngIf="comment.user.profile_image && comment.user.profile_image.url" [src]="comment.user.profile_image.url" onError="this.src='assets/images/placeholder_user1.png'">
            <!-- <img style="border-radius:10px;" *ngIf="comment.user.avatar_image != null && comment.user.avatar_toggle == true" [src]="comment.user.avatar_image.url" onError="this.src='assets/images/placeholder_user1.png'"> -->
            <img class="cssthumb" style="border-radius:50%;" *ngIf="!comment.user.profile_image || !comment.user.profile_image.url" src="assets/images/placeholder_user1.png">
          </ion-avatar>
          <ion-label (click)="commenting(story[0].feed.id, story[0].feed.comments, story[0].feed.title, story[0].user, story[0].feed)" style="white-space:normal; height: 50px;line-height: unset;">
            <p *ngIf="comment.user.name" style="font-size: 1.2rem;font-weight: bold;text-align: left;margin-top:4px;font-family: 'Roboto', sans-serif;">{{comment.user.name}}</p>
            <!-- <p *ngIf="comment.user.avatar_toggle" style="font-size: 1.2rem;font-weight: bold;text-align: left;font-family: 'Roboto', sans-serif;">{{comment.user.avatar_name}}</p> -->
            <p id="demo1{{idx}}{{commentIdx}}" class="line-clamp" style="color: #000;font-size: 1.2rem;font-weight: normal;text-align: left;font-family: 'Roboto', sans-serif;"> {{desChange(comment.description, commentIdx, idx, "demo1")}} </p>
          </ion-label>
        </ion-item>
      </div>      
      <marquee scrollamount="5" direction="up" *ngIf="story[0].feed.latest_comments && story[0].feed.latest_comments.length > 1"  style="height:60px;width:94%;margin:0px 10px 10px 10px;border-radius:4px;background-color: #F1F1F1;box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.10), 0 3px 1px -2px rgba(0, 0, 0, 0.05), 0 1px 5px 0 rgba(0, 0, 0, 0.0);">
        <div style="white-space:nowrap;" *ngFor="let comment of story[0].feed.latest_comments; let commentIdx1 = index;" >
          <ion-item>
            <ion-avatar (click)="profileUser(story[0].feed.user.id)" item-left style="margin:11px 0px 11px 0px;">
              <img style="border-radius:50%;" *ngIf="comment.user.profile_image" [src]="comment.user.profile_image.url" onError="this.src='assets/images/placeholder_user1.png'">
              <!-- <img style="border-radius:10px;" *ngIf="comment.user.avatar_image != null && comment.user.avatar_toggle == true" [src]="comment.user.avatar_image.url" onError="this.src='assets/images/placeholder_user1.png'"> -->
              <img style="border-radius:50%;" *ngIf="!comment.user.profile_image || !comment.user.profile_image.url" src="assets/images/placeholder_user1.png">
            </ion-avatar>
            <ion-label (click)="commenting(story[0].feed.id, story[0].feed.comments, story[0].feed.title, story[0].user, story[0].feed)" style="white-space:normal; height: 50px;line-height: unset;">
              <p *ngIf="comment.user.name" style="font-size: 1.2rem;font-weight: bold;text-align: left;margin-top:4px;font-family: 'Roboto', sans-serif;">{{comment.user.name}}</p>
              <!-- <p *ngIf="comment.user.avatar_toggle" style="font-size: 1.2rem;font-weight: bold;text-align: left;font-family: 'Roboto', sans-serif;">{{comment.user.avatar_name}}</p> -->
              <p id="demo2{{idx}}{{commentIdx1}}" class="line-clamp" style="color: #000;font-size: 1.2rem;font-weight: normal;text-align: left;font-family: 'Roboto', sans-serif;"> {{desChangeLoop(comment.description, commentIdx1, idx, "demo2")}} </p>
            </ion-label>
          </ion-item>
        </div>
      </marquee>
    </ion-card>
  </ion-card>     
  </div>
  <!-- Timeline feed ends -->

  <!--Infinite scroll starts-->
  <ion-infinite-scroll *ngIf="!showSimilar && !this.sg['filterBy']" (ionInfinite)="doInfinite($event)">
    <ion-infinite-scroll-content></ion-infinite-scroll-content>
  </ion-infinite-scroll>
  <!--Infinite scroll ends-->

  <!-- Floating button -->
  <ion-fab *ngIf="topUpStatus" right bottom style="bottom:0;position:absolute;background-image:url('assets/images/fabIcon.svg')" (click)="scrollToTop()">     
    <img src="assets/images/fabIcon.svg">   
  </ion-fab>
 
</ion-content> 